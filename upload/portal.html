<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Wifi and MQTT configuration | OpenMQTTGateway v1.0.0</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script type="module" src="https://unpkg.com/esp-web-tools@3.4.2/dist/web/install-button.js?module"></script>
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS & LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.c6880577.css" as="style"><link rel="preload" href="/assets/js/app.b4e91731.js" as="script"><link rel="preload" href="/assets/js/2.a6c5863b.js" as="script"><link rel="preload" href="/assets/js/15.daced805.js" as="script"><link rel="prefetch" href="/assets/js/10.86b901b4.js"><link rel="prefetch" href="/assets/js/11.d9aa0c7f.js"><link rel="prefetch" href="/assets/js/12.42549b45.js"><link rel="prefetch" href="/assets/js/13.a1ab17b7.js"><link rel="prefetch" href="/assets/js/14.9da8592f.js"><link rel="prefetch" href="/assets/js/16.ca06fff0.js"><link rel="prefetch" href="/assets/js/17.792ecbda.js"><link rel="prefetch" href="/assets/js/18.8ed58511.js"><link rel="prefetch" href="/assets/js/19.139d2421.js"><link rel="prefetch" href="/assets/js/20.18bc7ae0.js"><link rel="prefetch" href="/assets/js/21.d76d0dd4.js"><link rel="prefetch" href="/assets/js/22.aef266f3.js"><link rel="prefetch" href="/assets/js/23.4e160d91.js"><link rel="prefetch" href="/assets/js/24.ea9dc466.js"><link rel="prefetch" href="/assets/js/25.93a147fc.js"><link rel="prefetch" href="/assets/js/26.7a5fab81.js"><link rel="prefetch" href="/assets/js/27.c967b84d.js"><link rel="prefetch" href="/assets/js/28.d38b846b.js"><link rel="prefetch" href="/assets/js/29.7ae9580d.js"><link rel="prefetch" href="/assets/js/3.4e44a5d2.js"><link rel="prefetch" href="/assets/js/30.34588839.js"><link rel="prefetch" href="/assets/js/31.fd2033c7.js"><link rel="prefetch" href="/assets/js/32.44f1f98e.js"><link rel="prefetch" href="/assets/js/33.487777ba.js"><link rel="prefetch" href="/assets/js/34.f6a2864d.js"><link rel="prefetch" href="/assets/js/35.6ea29351.js"><link rel="prefetch" href="/assets/js/36.60a841ed.js"><link rel="prefetch" href="/assets/js/37.bbede137.js"><link rel="prefetch" href="/assets/js/38.20c81ba4.js"><link rel="prefetch" href="/assets/js/39.67f2d2da.js"><link rel="prefetch" href="/assets/js/4.d6985413.js"><link rel="prefetch" href="/assets/js/40.a8d54551.js"><link rel="prefetch" href="/assets/js/41.4f72842e.js"><link rel="prefetch" href="/assets/js/42.ae48f48d.js"><link rel="prefetch" href="/assets/js/43.b58c5c95.js"><link rel="prefetch" href="/assets/js/44.daf07aa7.js"><link rel="prefetch" href="/assets/js/45.fe7106e9.js"><link rel="prefetch" href="/assets/js/46.7559b8d7.js"><link rel="prefetch" href="/assets/js/47.10b2567f.js"><link rel="prefetch" href="/assets/js/48.6cef5399.js"><link rel="prefetch" href="/assets/js/49.dc9ec9ad.js"><link rel="prefetch" href="/assets/js/5.59c0570c.js"><link rel="prefetch" href="/assets/js/6.e06f7d51.js"><link rel="prefetch" href="/assets/js/7.85d88118.js"><link rel="prefetch" href="/assets/js/8.dabec77d.js"><link rel="prefetch" href="/assets/js/9.4e1d69e0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c6880577.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway v1.0.0</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_self" class="nav-link external">
  Devices
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_self" class="nav-link external">
  Boards
  <!----></a></div><div class="nav-item"><a href="/upload/web-install.html" class="nav-link">
  Upload
</a></div><div class="nav-item"><a href="https://app.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Theengs🆕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_self" class="nav-link external">
  Devices
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_self" class="nav-link external">
  Boards
  <!----></a></div><div class="nav-item"><a href="/upload/web-install.html" class="nav-link">
  Upload
</a></div><div class="nav-item"><a href="https://app.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Theengs🆕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up 🔨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>3 - Upload ➡️</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/upload/web-install.html" class="sidebar-link">(Option 1) Upload from the web</a></li><li><a href="/upload/binaries.html" class="sidebar-link">(Option 2) Upload ready-to-go binaries</a></li><li><a href="/upload/builds.html" class="sidebar-link">(Option 3) Upload your configurations</a></li><li><a href="/upload/portal.html" aria-current="page" class="active sidebar-link">Wifi and MQTT configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/upload/portal.html#wifi-and-mqtt-configuration-portal-for-wifi-boards" class="sidebar-link">Wifi and MQTT configuration portal for Wifi boards</a></li><li class="sidebar-sub-header"><a href="/upload/portal.html#mqtt-and-network-configuration-for-ethernet-and-wifi-boards" class="sidebar-link">MQTT and network configuration for Ethernet and Wifi boards</a></li></ul></li><li><a href="/upload/advanced-configuration.html" class="sidebar-link">Advanced configuration of the gateway</a></li><li><a href="/upload/troubleshoot.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4 - Use ✈️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5 - Integrate 🎉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="wifi-and-mqtt-configuration"><a href="#wifi-and-mqtt-configuration" class="header-anchor">#</a> Wifi and MQTT configuration</h1> <h2 id="wifi-and-mqtt-configuration-portal-for-wifi-boards"><a href="#wifi-and-mqtt-configuration-portal-for-wifi-boards" class="header-anchor">#</a> Wifi and MQTT configuration portal for Wifi boards</h2> <p>Once loaded into your ESP and if you don't use the manual configuration you have to set your network parameters with wifi manager portal.
From your smartphone search for your OpenMQTTGateway wifi network and connect to it with <code>WifiManager_password</code> (the default password is &quot;your_password&quot;), a web page will appear.</p> <p><img src="/assets/img/OpenMQTTGateway_Wifi_Manager_menu.a42869cd.png" alt="Wifi manager menu"></p> <ul><li>Click on Configure WiFi</li></ul> <p><img src="/assets/img/OpenMQTTGateway_Wifi_Manager_enter_parameters.b56b5f33.png" alt="Wifi manager parameters"></p> <ul><li><p>Select your wifi</p></li> <li><p>Set your wifi password</p></li> <li><p>Set your MQTT Server IP</p></li> <li><p>Set your MQTT Server Port</p></li> <li><p>Set the MQTT secure connection box to select whether or not the connection should be secure</p></li> <li><p>Copy/paste the MQTT server certificate in the MQTT server cert box (only required if using a secure connection), be sure to include the <code>-----BEGIN CERTIFICATE-----</code> and <code>-----END CERTIFICATE-----</code> markers</p></li> <li><p>Set your MQTT Server username (facultative)</p></li> <li><p>Set your MQTT Server password (facultative)</p></li> <li><p>Set your MQTT base topic if you need to change it (you must keep the / at the end)</p></li> <li><p>Set your gateway name if you need to change it</p></li> <li><p>Click on save</p></li></ul> <p><img src="/assets/img/OpenMQTTGateway_Wifi_Manager_save.15fcfc72.png" alt="Wifi manager save"></p> <p>The ESP restart and connect to your network. Note that your credentials are saved into the ESP memory, if you want to redo the configuration you have to erase the ESP memory with the flash download tool.</p> <p>Once done the gateway should connect to your network and your broker, you should see it into the broker in the form of the following messages:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>home/OpenMQTTGateway/LWT Online 
home/OpenMQTTGateway/version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Note that the web portal appears only on first boot, if you want to configure again the setting you can do a long press on TRIGGER_GPIO or <a href="/use/gateway.html#erase-the-esp-settings">erase the settings</a>.</p> <h2 id="mqtt-and-network-configuration-for-ethernet-and-wifi-boards"><a href="#mqtt-and-network-configuration-for-ethernet-and-wifi-boards" class="header-anchor">#</a> MQTT and network configuration for Ethernet and Wifi boards</h2> <p>You can configure your MQTT server credentials and network configuration before building the application. It can be done either in Arduino or in Platformio IDE thought the User_config.h file. Note that with Platformio IDE you can also set your credentials into the platformio.ini file or an *_env.ini file, here is an example with the Olimex ESP32 gateway:</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">env:esp32-olimex-gtw-ble</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">platform</span> <span class="token punctuation">=</span> <span class="token value attr-value">${com.esp32_platform}</span>
<span class="token key attr-name">board</span> <span class="token punctuation">=</span> <span class="token value attr-value">esp32-gateway</span>
<span class="token key attr-name">board_build.partitions</span> <span class="token punctuation">=</span> <span class="token value attr-value">min_spiffs.csv</span>
<span class="token key attr-name">lib_deps</span> <span class="token punctuation">=</span>
  ${com-esp.lib_deps}
  ${libraries.ble}
<span class="token key attr-name">build_flags</span> <span class="token punctuation">=</span>
  ${com-esp.build_flags}
  <span class="token key attr-name">'-DZgatewayBT</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;BT&quot;'</span>
  <span class="token key attr-name">'-DLED_INFO</span><span class="token punctuation">=</span><span class="token value attr-value">33'</span>
  <span class="token key attr-name">'-DLED_INFO_ON</span><span class="token punctuation">=</span><span class="token value attr-value">1'</span>
  <span class="token key attr-name">'-DESP32_ETHERNET</span><span class="token punctuation">=</span><span class="token value attr-value">true'</span>
  <span class="token key attr-name">'-DMQTT_SERVER</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;11.22.33.44&quot;'</span>
  <span class="token key attr-name">'-DMQTT_USER</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;salut&quot;'</span>
  <span class="token key attr-name">'-DMQTT_PASS</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;atoi&quot;'</span>
  <span class="token key attr-name">'-DGateway_Name</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;OpenMQTTGateway_ESP32_OLM_GTW&quot;'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/upload/portal.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/24/2022, 12:34:59 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/upload/builds.html" class="prev">
        (Option 3) Upload your configurations
      </a></span> <span class="next"><a href="/upload/advanced-configuration.html">
        Advanced configuration of the gateway
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b4e91731.js" defer></script><script src="/assets/js/2.a6c5863b.js" defer></script><script src="/assets/js/15.daced805.js" defer></script>
  </body>
</html>
