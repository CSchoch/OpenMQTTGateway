<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>BLE gateway | OpenMQTTGateway v0.9.15</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script type="module" src="https://unpkg.com/esp-web-tools@3.4.2/dist/web/install-button.js?module"></script>
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS & LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.c6880577.css" as="style"><link rel="preload" href="/assets/js/app.9f6707d2.js" as="script"><link rel="preload" href="/assets/js/2.43117174.js" as="script"><link rel="preload" href="/assets/js/8.801312f1.js" as="script"><link rel="prefetch" href="/assets/js/10.67626b5a.js"><link rel="prefetch" href="/assets/js/11.c1d69e03.js"><link rel="prefetch" href="/assets/js/12.9740403c.js"><link rel="prefetch" href="/assets/js/13.a1137f99.js"><link rel="prefetch" href="/assets/js/14.b5f62055.js"><link rel="prefetch" href="/assets/js/15.868eddae.js"><link rel="prefetch" href="/assets/js/16.aaaaa74a.js"><link rel="prefetch" href="/assets/js/17.46bfb1b1.js"><link rel="prefetch" href="/assets/js/18.d15e4f72.js"><link rel="prefetch" href="/assets/js/19.845b0e6e.js"><link rel="prefetch" href="/assets/js/20.b4cbcb32.js"><link rel="prefetch" href="/assets/js/21.ded59ede.js"><link rel="prefetch" href="/assets/js/22.fccd7736.js"><link rel="prefetch" href="/assets/js/23.6094536c.js"><link rel="prefetch" href="/assets/js/24.c1b99a2e.js"><link rel="prefetch" href="/assets/js/25.d5edde6a.js"><link rel="prefetch" href="/assets/js/26.6a5e61b6.js"><link rel="prefetch" href="/assets/js/27.14f7a8f3.js"><link rel="prefetch" href="/assets/js/28.73251769.js"><link rel="prefetch" href="/assets/js/29.8d3efecc.js"><link rel="prefetch" href="/assets/js/3.08d1e2ed.js"><link rel="prefetch" href="/assets/js/30.9dbeb4b4.js"><link rel="prefetch" href="/assets/js/31.9e3bb944.js"><link rel="prefetch" href="/assets/js/32.9823ec2e.js"><link rel="prefetch" href="/assets/js/33.7ce9809c.js"><link rel="prefetch" href="/assets/js/34.45939429.js"><link rel="prefetch" href="/assets/js/35.d28d2a10.js"><link rel="prefetch" href="/assets/js/36.627d4ac9.js"><link rel="prefetch" href="/assets/js/37.3cd36b31.js"><link rel="prefetch" href="/assets/js/38.eee9b0b2.js"><link rel="prefetch" href="/assets/js/39.175fcff4.js"><link rel="prefetch" href="/assets/js/4.3a274f40.js"><link rel="prefetch" href="/assets/js/40.bd329a5c.js"><link rel="prefetch" href="/assets/js/41.0cf96fb4.js"><link rel="prefetch" href="/assets/js/42.05ba8df6.js"><link rel="prefetch" href="/assets/js/43.d8a29ce8.js"><link rel="prefetch" href="/assets/js/44.50bd437e.js"><link rel="prefetch" href="/assets/js/45.07951e8a.js"><link rel="prefetch" href="/assets/js/46.05ff28e6.js"><link rel="prefetch" href="/assets/js/47.592b3a19.js"><link rel="prefetch" href="/assets/js/5.dfa7d707.js"><link rel="prefetch" href="/assets/js/6.97617aaa.js"><link rel="prefetch" href="/assets/js/7.5c671c14.js"><link rel="prefetch" href="/assets/js/9.36ea35c4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c6880577.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway v0.9.15</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_self" class="nav-link external">
  Devices
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_self" class="nav-link external">
  Boards
  <!----></a></div><div class="nav-item"><a href="/upload/web-install.html" class="nav-link">
  Upload
</a></div><div class="nav-item"><a href="https://app.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Theengs🆕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/devices" target="_self" class="nav-link external">
  Devices
  <!----></a></div><div class="nav-item"><a href="https://compatible.openmqttgateway.com/index.php/boards" target="_self" class="nav-link external">
  Boards
  <!----></a></div><div class="nav-item"><a href="/upload/web-install.html" class="nav-link">
  Upload
</a></div><div class="nav-item"><a href="https://app.theengs.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Theengs🆕
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>2 - Set it up 🔨</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/setitup/rf.html" class="sidebar-link">RF gateway (433mhz/315mhz)</a></li><li><a href="/setitup/ble.html" aria-current="page" class="active sidebar-link">BLE gateway</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/setitup/ble.html#compatible-parts" class="sidebar-link">Compatible parts</a></li><li class="sidebar-sub-header"><a href="/setitup/ble.html#pinout" class="sidebar-link">Pinout</a></li><li class="sidebar-sub-header"><a href="/setitup/ble.html#arduino-hardware-setup" class="sidebar-link">Arduino Hardware setup</a></li><li class="sidebar-sub-header"><a href="/setitup/ble.html#esp8266-hardware-setup" class="sidebar-link">ESP8266 Hardware setup</a></li></ul></li><li><a href="/setitup/ir.html" class="sidebar-link">IR gateway</a></li><li><a href="/setitup/lora.html" class="sidebar-link">LORA gateway</a></li><li><a href="/setitup/gsm.html" class="sidebar-link">GSM 2G gateway</a></li><li><a href="/setitup/rs232.html" class="sidebar-link">RS232 gateway</a></li><li><a href="/setitup/sensors.html" class="sidebar-link">Sensors</a></li><li><a href="/setitup/actuators.html" class="sidebar-link">Actuators</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ➡️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4 - Use ✈️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5 - Integrate 🎉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ble-gateway"><a href="#ble-gateway" class="header-anchor">#</a> BLE gateway</h1> <h2 id="compatible-parts"><a href="#compatible-parts" class="header-anchor">#</a> Compatible parts</h2> <p><strong>The ESP32 has an integrated BLE module</strong>, with this board the BLE gateway don't need any additional hardware. Making it the <strong>advised board for BLE</strong>.</p> <p>You can use a barebone ESP32 or some nice looking products like the ones below (from M5Stack):</p> <p><img src="/assets/img/OpenMQTTgateway_M5_Atom_Board.766668e8.png" alt=""> <img src="/assets/img/OpenMQTTgateway_M5_Stack_Board_Display_Text.b2457906.png" alt=""></p> <p>For Arduino and ESP8266 you can use an HM10 or HM11 below.</p> <table><thead><tr><th>Module</th> <th>Purpose</th> <th>Where to Buy</th></tr></thead> <tbody><tr><td>HM 10 Keyes bluetooth module</td> <td>Bluetooth</td> <td><a href="https://compatible.openmqttgateway.com/index.php/parts" target="_blank" rel="noopener noreferrer">compatible parts list<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td></tr></tbody></table> <h2 id="pinout"><a href="#pinout" class="header-anchor">#</a> Pinout</h2> <table><thead><tr><th>Module Pin</th> <th style="text-align:center;">Board RX Pin</th> <th style="text-align:center;">Board TX Pin</th></tr></thead> <tbody><tr><td>Arduino</td> <td style="text-align:center;">D6 to HM10 RX</td> <td style="text-align:center;">D5 to HM10 TX</td></tr> <tr><td>ESP8266</td> <td style="text-align:center;">D6 to HM10 RX</td> <td style="text-align:center;">D7 to HM10 TX</td></tr></tbody></table> <p>Vcc pin of the board and the HM10 Module to a 5V supply source.
Ground pins of the board and the HM10 Module to the ground of the supply source.</p> <h3 id="debugging-the-hm10"><a href="#debugging-the-hm10" class="header-anchor">#</a> Debugging the HM10</h3> <p>So as to communicate directly with the HM10 you may use <a href="https://github.com/1technophile/serial_modules_debug" target="_blank" rel="noopener noreferrer">this program<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from Martin Currey, you can upload it to your ESP board and it will enable without an FTDI to write and read commands directly to the HM10 through the ESP. You may use the Arduino IDE Serial Monitor to read and send the commands.
The baud rate of the HM10/11 module must be set to 9600 bauds , the command <code>AT+BAUD?</code> enables to know at which speed the module is set.
So as to set it to 9600 that you may use <code>AT+BAUD0</code> command.</p> <p>The HM10/11 firmware version must be &gt;= V709 the command <code>AT+VERS?</code> enables to know the firmware version.</p> <h2 id="arduino-hardware-setup"><a href="#arduino-hardware-setup" class="header-anchor">#</a> Arduino Hardware setup</h2> <p><img src="/assets/img/OpenMQTTgateway_Arduino_Addon_BT.41f7446a.png" alt="BLE Arduino"></p> <h2 id="esp8266-hardware-setup"><a href="#esp8266-hardware-setup" class="header-anchor">#</a> ESP8266 Hardware setup</h2> <p><img src="/assets/img/OpenMQTTgateway_ESP8266_Addon_BT.94d8d848.png" alt="BLE ESP8266"></p> <p>The implementation with the HM10 module would not have been possible without the work of <a href="http://www.martyncurrey.com" target="_blank" rel="noopener noreferrer">Martin Currey<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, thanks!</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/setitup/ble.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/29/2022, 6:04:04 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/setitup/rf.html" class="prev">
        RF gateway (433mhz/315mhz)
      </a></span> <span class="next"><a href="/setitup/ir.html">
        IR gateway
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9f6707d2.js" defer></script><script src="/assets/js/2.43117174.js" defer></script><script src="/assets/js/8.801312f1.js" defer></script>
  </body>
</html>
